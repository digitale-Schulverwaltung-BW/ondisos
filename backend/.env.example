# ============================================================================
# Backend Environment Configuration
# ============================================================================
# Copy this file to .env and fill in your production values
# NEVER commit .env to git! (.gitignore should contain .env)
#
# Quick Setup:
#   cp .env.example .env
#   nano .env  # Edit values
#   chmod 600 .env  # Secure permissions
# ============================================================================

# ============================================================================
# APPLICATION
# ============================================================================
# Environment: production, development, testing
APP_ENV=production

# Debug Mode: false for production! (exposes sensitive data)
APP_DEBUG=false

# Force HTTPS (Production)
# Fallback if .htaccess HTTPS redirect is not configured
# Recommended: Use .htaccess redirect (more performant) + this as backup
# Set to true if behind HTTPS reverse proxy
FORCE_HTTPS=false

# ============================================================================
# DATABASE
# ============================================================================
# For Docker: Use DB_HOST=mysql (container name)
# For Manual: Use DB_HOST=127.0.0.1 or your MySQL server IP
DB_HOST=127.0.0.1
DB_PORT=3306
DB_NAME=anmeldung
DB_USER=admin
DB_PASS=

# Docker MySQL Credentials (only if using docker-compose.prod.yml)
# These override the hardcoded values in docker-compose.yml
# IMPORTANT: Change these in production!
MYSQL_ROOT_PASSWORD=
MYSQL_PASSWORD=

# ============================================================================
# SECURITY & SECRETS
# ============================================================================
# PDF Token Secret (REQUIRED!)
# Used for HMAC-based PDF download token generation
# MUST be at least 32 characters for security
# Generate with: openssl rand -hex 32
PDF_TOKEN_SECRET=

# API Secret Key (optional, for frontend-backend auth)
# Generate with: openssl rand -hex 32
API_SECRET_KEY=

# ============================================================================
# ADMIN AUTHENTICATION
# ============================================================================
# Enable login requirement for admin interface
# Recommended: true for public networks, false for secured intranet
AUTH_ENABLED=false

# Admin Username
ADMIN_USERNAME=admin

# Admin Password Hash
# Generate with: docker-compose exec backend php scripts/generate-password-hash.php "your-password"
# Or: php -r "echo password_hash('your-password', PASSWORD_DEFAULT);"
ADMIN_PASSWORD_HASH=

# ============================================================================
# SESSION
# ============================================================================
# Session lifetime in seconds (3600 = 1 hour)
SESSION_LIFETIME=3600

# Secure cookies (HTTPS only) - set to true in production with HTTPS!
SESSION_SECURE=true

# ============================================================================
# FILE UPLOAD
# ============================================================================
# Max upload size in bytes (10485760 = 10MB)
UPLOAD_MAX_SIZE=10485760

# Allowed file types (comma-separated)
UPLOAD_ALLOWED_TYPES=pdf,jpg,jpeg,png,gif,doc,docx

# ============================================================================
# RATE LIMITING
# ============================================================================
# Protects API endpoints from abuse and DoS attacks
RATE_LIMIT_ENABLED=true

# Max requests per window
RATE_LIMIT_MAX=10

# Time window in seconds (60 = 1 minute)
RATE_LIMIT_WINDOW=60

# ============================================================================
# AUTO-EXPUNGE
# ============================================================================
# Auto-delete archived entries after X days (0 = disabled)
# Recommended: 90-180 days for GDPR compliance
AUTO_EXPUNGE_DAYS=90

# Automatically mark entries as "exportiert" when exported to Excel
AUTO_MARK_AS_READ=true

# ============================================================================
# LOGGING
# ============================================================================
# Log level: debug, info, warning, error
# Recommended: error for production, debug for development
LOG_LEVEL=error

# Log file path
LOG_FILE=/var/log/anmeldung/app.log

# ============================================================================
# PRODUCTION CHECKLIST
# ============================================================================
# Before deploying to production, ensure:
# [ ] APP_DEBUG=false
# [ ] APP_ENV=production
# [ ] PDF_TOKEN_SECRET is set (min 32 chars)
# [ ] DB_PASS is set and strong
# [ ] MYSQL_ROOT_PASSWORD is changed (if using Docker)
# [ ] MYSQL_PASSWORD is changed (if using Docker)
# [ ] AUTH_ENABLED=true (if public network)
# [ ] ADMIN_PASSWORD_HASH is set (if AUTH_ENABLED=true)
# [ ] SESSION_SECURE=true (if HTTPS enabled)
# [ ] FORCE_HTTPS=true (if behind HTTPS proxy)
# [ ] .env file has chmod 600 permissions
# [ ] .env is in .gitignore (never commit!)
# ============================================================================